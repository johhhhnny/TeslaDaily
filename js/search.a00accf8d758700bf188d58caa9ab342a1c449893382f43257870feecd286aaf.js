(()=>{(function(){function m(e,t){let n;return function(){let r=this,u=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(r,u)},t)}}function p(){var e=document.getElementById("search-results");if(!e){var t=document.getElementById("search-bar");e=document.createElement("div"),e.id="search-results",e.className="mt-3",t&&t.appendChild(e)}return e}var l=null,i=null;function v(){return l?Promise.resolve(l):i||(i=fetch("/index.json",{credentials:"same-origin"}).then(function(e){return e.json()}).then(function(e){return l=e,e}).catch(function(e){return console.error("Search index load error:",e),[]}),i)}function a(e){return(e||"").toString().toLowerCase()}function h(e,t){var n=a(t);return n?!!(a(e.title).includes(n)||a(e.description).includes(n)||a(e.content).includes(n)||Array.isArray(e.tags)&&e.tags.some(function(r){return a(r).includes(n)})||Array.isArray(e.categories)&&e.categories.some(function(r){return a(r).includes(n)})):!1}function x(e,t){var n=p();if(n.innerHTML="",!!t){if(!e||e.length===0){n.innerHTML='<p class="text-sm text-zinc-500">\u672A\u627E\u5230\u5339\u914D\u7ED3\u679C</p>';return}var r=document.createElement("ul");r.className="space-y-2",e.slice(0,20).forEach(function(u){var c=document.createElement("li");c.className="flex flex-col";var o=document.createElement("a");o.className="decoration-auto hover:underline font-semibold",o.href=u.permalink,o.textContent=u.title;var s=document.createElement("span");s.className="text-sm text-zinc-500";var d=u.description||"";d||(d=(u.content||"").slice(0,140)),s.textContent=d,c.appendChild(o),c.appendChild(s),r.appendChild(c)}),n.appendChild(r)}}function f(e){v().then(function(t){var n=t.filter(function(r){return h(r,e)});x(n,e)})}document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("search");if(e){var t=e.querySelector('input[name="q"]')||e.querySelector("input");if(t){var n=m(function(){var r=t.value.trim();f(r)},250);e.addEventListener("submit",function(r){r.preventDefault();var u=t.value.trim();f(u)}),t.addEventListener("input",n)}}})})();})();
